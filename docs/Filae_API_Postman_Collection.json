{
	"info": {
		"_postman_id": "filae-api-collection-sprint2-complete",
		"name": "Filae API - Sprint 2 (Complete with Real Data)",
		"description": "Complete REST API collection for Filae - Virtual Queue Management System\n\n**Base URL:** http://localhost:8080/api\n\n**Version:** Sprint 2 - Complete with Migration Data\n\n**Test Users (Password: SecurePass123!):**\n- alice@example.com (ID: 1, CUSTOMER)\n- bob@example.com (ID: 2, CUSTOMER)\n- carol@example.com (ID: 3, CUSTOMER)\n- tony@tonysrestaurant.com (ID: 4, MERCHANT)\n- maria@mariacafe.com (ID: 5, MERCHANT)\n- admin@filae.com (ID: 6, ADMIN)\n\n**Test Data Included:**\n- 5 Establishments (1-5)\n- 6 Users (1-6)\n- 7 Queue Entries (1-7)\n- 5 Notifications (1-5)\n- 11 Favorites\n\n**Workflow:**\n1. Login to get JWT token\n2. Browse establishments\n3. View favorites\n4. Check notifications\n5. Join/manage queues\n6. Manage profile",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"version": "2.0.0"
	},
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:8080/api",
			"type": "string"
		},
		{
			"key": "token",
			"value": "",
			"type": "string",
			"description": "JWT Bearer Token - auto-set after login"
		}
	],
	"item": [
		{
			"name": "0. HEALTH & SYSTEM",
			"item": [
				{
					"name": "Health Check",
					"request": {
						"auth": {"type": "noauth"},
						"method": "GET",
						"url": {"raw": "{{baseUrl}}/health","host": ["{{baseUrl}}"],"path": ["health"]},
						"description": "No auth required - Tests basic connectivity"
					}
				},
				{
					"name": "System Statistics",
					"request": {
						"auth": {"type": "noauth"},
						"method": "GET",
						"url": {"raw": "{{baseUrl}}/health/stats","host": ["{{baseUrl}}"],"path": ["health","stats"]},
						"description": "System stats - Shows: Users, Establishments, Queues, Notifications, Favorites"
					}
				}
			]
		},
		{
			"name": "1. AUTHENTICATION",
			"item": [
				{
					"name": "Login - Alice (Customer)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": ["if (pm.response.code === 200) { var jsonData = pm.response.json(); pm.environment.set('token', jsonData.token); console.log('✓ Token saved'); }"]
							}
						}
					],
					"request": {
						"auth": {"type": "noauth"},
						"method": "POST",
						"header": [{"key": "Content-Type","value": "application/json"}],
						"body": {"mode": "raw","raw": "{\n  \"email\": \"alice@example.com\",\n  \"password\": \"SecurePass123!\"\n}"},
						"url": {"raw": "{{baseUrl}}/auth/login","host": ["{{baseUrl}}"],"path": ["auth", "login"]},
						"description": "ID: 1, Has 2 favorites and 3 unread notifications"
					}
				},
				{
					"name": "Login - Bob (Customer)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": ["if (pm.response.code === 200) { var jsonData = pm.response.json(); pm.environment.set('token', jsonData.token); console.log('✓ Token saved'); }"]
							}
						}
					],
					"request": {
						"auth": {"type": "noauth"},
						"method": "POST",
						"header": [{"key": "Content-Type","value": "application/json"}],
						"body": {"mode": "raw","raw": "{\n  \"email\": \"bob@example.com\",\n  \"password\": \"SecurePass123!\"\n}"},
						"url": {"raw": "{{baseUrl}}/auth/login","host": ["{{baseUrl}}"],"path": ["auth", "login"]},
						"description": "ID: 2, Has 2 favorites"
					}
				},
				{
					"name": "Login - Carol (Customer)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": ["if (pm.response.code === 200) { var jsonData = pm.response.json(); pm.environment.set('token', jsonData.token); console.log('✓ Token saved'); }"]
							}
						}
					],
					"request": {
						"auth": {"type": "noauth"},
						"method": "POST",
						"header": [{"key": "Content-Type","value": "application/json"}],
						"body": {"mode": "raw","raw": "{\n  \"email\": \"carol@example.com\",\n  \"password\": \"SecurePass123!\"\n}"},
						"url": {"raw": "{{baseUrl}}/auth/login","host": ["{{baseUrl}}"],"path": ["auth", "login"]},
						"description": "ID: 3, In queue (CALLED status)"
					}
				},
				{
					"name": "Login - Tony (Merchant)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": ["if (pm.response.code === 200) { var jsonData = pm.response.json(); pm.environment.set('token', jsonData.token); console.log('✓ Token saved'); }"]
							}
						}
					],
					"request": {
						"auth": {"type": "noauth"},
						"method": "POST",
						"header": [{"key": "Content-Type","value": "application/json"}],
						"body": {"mode": "raw","raw": "{\n  \"email\": \"tony@tonysrestaurant.com\",\n  \"password\": \"SecurePass123!\"\n}"},
						"url": {"raw": "{{baseUrl}}/auth/login","host": ["{{baseUrl}}"],"path": ["auth", "login"]},
						"description": "ID: 4, Merchant - Can manage queue"
					}
				},
				{
					"name": "Login - Maria (Merchant)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": ["if (pm.response.code === 200) { var jsonData = pm.response.json(); pm.environment.set('token', jsonData.token); console.log('✓ Token saved'); }"]
							}
						}
					],
					"request": {
						"auth": {"type": "noauth"},
						"method": "POST",
						"header": [{"key": "Content-Type","value": "application/json"}],
						"body": {"mode": "raw","raw": "{\n  \"email\": \"maria@mariacafe.com\",\n  \"password\": \"SecurePass123!\"\n}"},
						"url": {"raw": "{{baseUrl}}/auth/login","host": ["{{baseUrl}}"],"path": ["auth", "login"]},
						"description": "ID: 5, Merchant"
					}
				},
				{
					"name": "Register New User",
					"request": {
						"auth": {"type": "noauth"},
						"method": "POST",
						"header": [{"key": "Content-Type","value": "application/json"}],
						"body": {"mode": "raw","raw": "{\n  \"name\": \"New User Test\",\n  \"email\": \"newuser@example.com\",\n  \"password\": \"SecurePass123!\",\n  \"phone\": \"11999999999\",\n  \"userType\": \"CUSTOMER\"\n}"},
						"url": {"raw": "{{baseUrl}}/auth/register","host": ["{{baseUrl}}"],"path": ["auth", "register"]},
						"description": "Register a new user"
					}
				}
			]
		},
		{
			"name": "2. USER MANAGEMENT",
			"item": [
				{
					"name": "Get My Profile",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "GET",
						"url": {"raw": "{{baseUrl}}/users/me","host": ["{{baseUrl}}"],"path": ["users", "me"]}
					}
				},
				{
					"name": "Get User by ID - Alice (1)",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "GET",
						"url": {"raw": "{{baseUrl}}/users/1","host": ["{{baseUrl}}"],"path": ["users", "1"]}
					}
				},
				{
					"name": "Get User by ID - Bob (2)",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "GET",
						"url": {"raw": "{{baseUrl}}/users/2","host": ["{{baseUrl}}"],"path": ["users", "2"]}
					}
				},
				{
					"name": "Update My Profile",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "PUT",
						"header": [{"key": "Content-Type","value": "application/json"}],
						"body": {"mode": "raw","raw": "{\n  \"name\": \"Alice Updated\",\n  \"phone\": \"11988888888\",\n  \"profilePictureUrl\": \"https://example.com/alice.jpg\"\n}"},
						"url": {"raw": "{{baseUrl}}/users/me","host": ["{{baseUrl}}"],"path": ["users", "me"]}
					}
				},
				{
					"name": "Update User by ID",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "PUT",
						"header": [{"key": "Content-Type","value": "application/json"}],
						"body": {"mode": "raw","raw": "{\n  \"name\": \"Bob Updated\",\n  \"phone\": \"11977777777\"\n}"},
						"url": {"raw": "{{baseUrl}}/users/2","host": ["{{baseUrl}}"],"path": ["users", "2"]}
					}
				}
			]
		},
		{
			"name": "3. ESTABLISHMENTS",
			"item": [
				{
					"name": "Get All Establishments",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "GET",
						"url": {"raw": "{{baseUrl}}/establishments","host": ["{{baseUrl}}"],"path": ["establishments"]},
						"description": "All 5 establishments"
					}
				},
				{
					"name": "Get Establishment #1 - Tony's",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "GET",
						"url": {"raw": "{{baseUrl}}/establishments/1","host": ["{{baseUrl}}"],"path": ["establishments", "1"]}
					}
				},
				{
					"name": "Get Establishment #2 - Maria's",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "GET",
						"url": {"raw": "{{baseUrl}}/establishments/2","host": ["{{baseUrl}}"],"path": ["establishments", "2"]}
					}
				},
				{
					"name": "Get Establishment #3 - Fast Burgers",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "GET",
						"url": {"raw": "{{baseUrl}}/establishments/3","host": ["{{baseUrl}}"],"path": ["establishments", "3"]}
					}
				},
				{
					"name": "Get Establishment #4 - Barber Shop",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "GET",
						"url": {"raw": "{{baseUrl}}/establishments/4","host": ["{{baseUrl}}"],"path": ["establishments", "4"]}
					}
				},
				{
					"name": "Get Establishment #5 - Cinema",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "GET",
						"url": {"raw": "{{baseUrl}}/establishments/5","host": ["{{baseUrl}}"],"path": ["establishments", "5"]}
					}
				},
				{
					"name": "Filter by Category",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "GET",
						"url": {"raw": "{{baseUrl}}/establishments?category=restaurant","host": ["{{baseUrl}}"],"path": ["establishments"],"query": [{"key": "category","value": "restaurant"}]}
					}
				},
				{
					"name": "Filter by City",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "GET",
						"url": {"raw": "{{baseUrl}}/establishments?city=São Paulo","host": ["{{baseUrl}}"],"path": ["establishments"],"query": [{"key": "city","value": "São Paulo"}]}
					}
				}
			]
		},
		{
			"name": "4. FAVORITES",
			"item": [
				{
					"name": "Get My Favorites",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "GET",
						"url": {"raw": "{{baseUrl}}/favorites","host": ["{{baseUrl}}"],"path": ["favorites"]}
					}
				},
				{
					"name": "Check if Favorited - Est #1",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "GET",
						"url": {"raw": "{{baseUrl}}/favorites/check/1","host": ["{{baseUrl}}"],"path": ["favorites", "check", "1"]}
					}
				},
				{
					"name": "Check if Favorited - Est #3",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "GET",
						"url": {"raw": "{{baseUrl}}/favorites/check/3","host": ["{{baseUrl}}"],"path": ["favorites", "check", "3"]}
					}
				},
				{
					"name": "Add to Favorites",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "POST",
						"header": [{"key": "Content-Type","value": "application/json"}],
						"body": {"mode": "raw","raw": "{\n  \"establishmentId\": 3\n}"},
						"url": {"raw": "{{baseUrl}}/favorites","host": ["{{baseUrl}}"],"path": ["favorites"]}
					}
				},
				{
					"name": "Remove from Favorites",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "DELETE",
						"url": {"raw": "{{baseUrl}}/favorites/1","host": ["{{baseUrl}}"],"path": ["favorites", "1"]}
					}
				}
			]
		},
		{
			"name": "5. NOTIFICATIONS",
			"item": [
				{
					"name": "Get All Notifications",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "GET",
						"url": {"raw": "{{baseUrl}}/notifications","host": ["{{baseUrl}}"],"path": ["notifications"]}
					}
				},
				{
					"name": "Get Unread Only",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "GET",
						"url": {"raw": "{{baseUrl}}/notifications?unread=true","host": ["{{baseUrl}}"],"path": ["notifications"],"query": [{"key": "unread","value": "true"}]}
					}
				},
				{
					"name": "Get Unread Count",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "GET",
						"url": {"raw": "{{baseUrl}}/notifications/unread/count","host": ["{{baseUrl}}"],"path": ["notifications", "unread", "count"]}
					}
				},
				{
					"name": "Mark as Read",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "PUT",
						"url": {"raw": "{{baseUrl}}/notifications/1/read","host": ["{{baseUrl}}"],"path": ["notifications", "1", "read"]}
					}
				},
				{
					"name": "Mark All as Read",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "PUT",
						"url": {"raw": "{{baseUrl}}/notifications/read-all","host": ["{{baseUrl}}"],"path": ["notifications", "read-all"]}
					}
				},
				{
					"name": "Delete Notification",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "DELETE",
						"url": {"raw": "{{baseUrl}}/notifications/1","host": ["{{baseUrl}}"],"path": ["notifications", "1"]}
					}
				}
			]
		},
		{
			"name": "6. QUEUES",
			"item": [
				{
					"name": "Get My Queues",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "GET",
						"url": {"raw": "{{baseUrl}}/queues/my-queues","host": ["{{baseUrl}}"],"path": ["queues", "my-queues"]}
					}
				},
				{
					"name": "Get Queue #1",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "GET",
						"url": {"raw": "{{baseUrl}}/queues/1","host": ["{{baseUrl}}"],"path": ["queues", "1"]}
					}
				},
				{
					"name": "Get Queue #2",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "GET",
						"url": {"raw": "{{baseUrl}}/queues/2","host": ["{{baseUrl}}"],"path": ["queues", "2"]}
					}
				},
				{
					"name": "Get Establishment Queue",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "GET",
						"url": {"raw": "{{baseUrl}}/queues/establishment/1","host": ["{{baseUrl}}"],"path": ["queues", "establishment", "1"]}
					}
				},
				{
					"name": "Join Queue",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "POST",
						"header": [{"key": "Content-Type","value": "application/json"}],
						"body": {"mode": "raw","raw": "{\n  \"establishmentId\": 2,\n  \"partySize\": 2,\n  \"notes\": \"Window seat\"\n}"},
						"url": {"raw": "{{baseUrl}}/queues/join","host": ["{{baseUrl}}"],"path": ["queues", "join"]}
					}
				},
				{
					"name": "Cancel Queue",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "PUT",
						"url": {"raw": "{{baseUrl}}/queues/1/cancel","host": ["{{baseUrl}}"],"path": ["queues", "1", "cancel"]}
					}
				},
				{
					"name": "Call Next (Merchant)",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "PUT",
						"url": {"raw": "{{baseUrl}}/queues/establishment/1/call-next","host": ["{{baseUrl}}"],"path": ["queues", "establishment", "1", "call-next"]}
					}
				},
				{
					"name": "Finish Service (Merchant)",
					"request": {
						"auth": {"type": "bearer","bearer": [{"key": "token","value": "{{token}}","type": "string"}]},
						"method": "PUT",
						"url": {"raw": "{{baseUrl}}/queues/1/finish","host": ["{{baseUrl}}"],"path": ["queues", "1", "finish"]}
					}
				}
			]
		}
	]
}

